+++
title = "–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è XSS —á–µ—Ä–µ–∑ htmlentities –∏–ª–∏ htmlspecialchars –≤ PHP"
date = "2020-12-30T20:28:20+03:00"
tags = ["php", "backend", "–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", "frontend", "security"]
+++

–°—Ç–æ–ª–∫–Ω—É–ª—Å—è –Ω–∞ –¥–Ω—è—Ö —Å –æ—á–µ–Ω—å —Å—Ç–∞—Ä–æ–π –¥—ã—Ä–∫–æ–π –Ω–∞ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–Ω—å—à–µ –≤—Å—Ç—Ä–µ—á–∞–ª–∞—Å—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞
–ë–∏—Ç—Ä–∏–∫—Å–µ –∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –∞–∫—Ç—É–∞–ª—å–Ω–∞ üòî –ß—Ç–æ–±—ã –¥–æ–≤–µ—Å—Ç–∏ —Å–∏—Ç—É–∞—Ü–∏—é –¥–æ **XSS**, –Ω—É–∂–Ω–æ:

1. –ü—Ä–æ–µ–∫—Ç –Ω–∞ php;
2. –í–µ—Ä—Å—Ç–∞–ª—å—â–∏–∫, —Ä–µ—à–∏–≤—à–∏–π, —á—Ç–æ –ø–∏—Å–∞—Ç—å –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –º–æ–¥–Ω–µ–µ, —á–µ–º –¥–≤–æ–π–Ω—ã–µ;
3. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–ª–∞–±–æ –ø–æ–Ω–∏–º–∞—é—â–∏–π –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —ç—Ç–æ–≥–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å —à–∞–±–ª–æ–Ω —Ç–∏–ø–∞ —Ç–∞–∫–æ–≥–æ:

```html
<form method="GET">
    <input name="search" placeholder='Search' value='<?=htmlentities($variable);?>' />
</form>
```

–ù–∏ `htmlentities` –Ω–∏ `htmlspecialchars` **–Ω–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç** –æ–¥–∏–Ω–∞—Ä–Ω—É—é –∫–∞–≤—ã—á–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ—ç—Ç–æ–º—É —Ä–∞–±–æ—á–∏–π –ø–µ–π–ª–æ–∞–¥
–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è –∏–º–µ–Ω–Ω–æ —Å –Ω–µ–µ: `' onload=alert(1)`.

–î–ª—è –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `ENT_QUOTES`.

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã —Ç–∏–ø–∞ `twig` –∏ `blade` –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —ç—Å–∫–µ–π–ø—è—Ç –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏, –Ω–æ –µ—Å–ª–∏ –≤–∞–º –¥–æ–≤–µ–ª–æ—Å—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å
php-—à–∞–±–ª–æ–Ω–∞–º–∏, —Ç–æ –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å —ç—Ç–æ –≤ –≤–∏–¥—É.

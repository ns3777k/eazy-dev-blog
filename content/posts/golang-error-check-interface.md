+++
title = "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ nil –≤ Golang"
date = "2020-06-18T02:50:50+03:00"
tags = ["golang", "backend"]
+++

–†–∞—Å—Å–∫–∞–∂—É –æ–± –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–º –∫–µ–π—Å–µ –≤ **golang**, —Å –∫–æ—Ç–æ—Ä—ã–º —è —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è –∑–∞—Å—ã–ª–∞—è –∫–æ–º–º–∏—Ç—ã –≤ [hoverfly](https://hoverfly.io/).
–°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –º–∞–≥–∏—é –Ω–∞ —Ç–∞–∫–æ–º –ø—Ä–∏–º–µ—Ä–µ:

```go
func getError() error {
	var err *reflect.ValueError = nil
	return err
}

func main() {
	err := getError()

	println("Type of error is", reflect.TypeOf(err).String()) // *reflect.ValueError
	println("Is value nil?", reflect.ValueOf(err).IsNil()) // true
	println("err equals nil?", err == nil) // false
}
```

–≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —É–ª–æ–≤–æ–∫ –≤ go - `nil` –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–µ–Ω `nil` üòï

–¢–∏–ø `*reflect.ValueError` –≤–∑—è—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏–∑ –ø–∞–∫–µ—Ç–∞ `reflect`, –ø–æ—Ç–æ–º—É –Ω–∏–∂–µ —ç—Ç–æ—Ç –ø–∞–∫–µ—Ç —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –ù–∞ –º–µ—Å—Ç–µ —ç—Ç–æ–π
–æ—à–∏–±–∫–∏, –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–∞—è –¥—Ä—É–≥–∞—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `error`. –¢—É—Ç —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `error` - —ç—Ç–æ
–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –º–∞–≥–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–º–µ–Ω–Ω–æ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø, *–æ–±–µ—Ä–Ω—É—Ç—ã–π* –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ **golang** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π [iface](https://github.com/golang/go/blob/go1.14.4/src/runtime/runtime2.go#L200),
–∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç 2 —É–∫–∞–∑–∞—Ç–µ–ª—è:

1. —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π `interface table` –∏–ª–∏ `itab` - —ç—Ç–æ –ø–æ —Å—É—Ç–∏ —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ
—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–º —Ç–∏–ø–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ - `*reflect.ValueError`)
2. —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ

–í–∞–∂–Ω–æ —É—Å–≤–æ–∏—Ç—å 1 –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω `nil` —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ —É –Ω–µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç **–∏**
–∑–Ω–∞—á–µ–Ω–∏–µ **–∏** —Ç–∏–ø. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ, –∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ —Ç–∏–ø –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É
`*reflect.ValueError`.

–í–æ—Ç [—Ä–µ–∞–ª—å–Ω—ã–π –∫–µ–π—Å –≤ hoverfly](https://github.com/SpectoLabs/hoverfly/blob/master/core/handlers/v2/simulation_views_v5.go#L90).
–ú–µ—Ç–æ–¥ `GetLogNormalDelay` —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ `this.LogNormalDelay`, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–∏–ø –±—É–¥–µ—Ç –æ–±–µ—Ä–Ω—É—Ç –≤
–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –µ–≥–æ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ —Å—Ä–∞–≤–Ω–∏—Ç—å —Å `nil`.

–û—Å—Ç–∞–≤–ª—è—é —Å—Å—ã–ª–∫—É –Ω–∞ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](https://golang.org/doc/faq#nil_error), –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π [—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–∫–ª–∞–¥
–ø—Ä–æ –≤–Ω—É—Ç—Ä—è–Ω–∫—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤](https://research.swtch.com/interfaces), [—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ nil](https://go101.org/article/nil.html) –∏
[–±–æ–ª–µ–µ –Ω–∞–≥–ª—è–¥–Ω—É—é –º–∏–Ω–∏ —Å—Ç–∞—Ç—å—é –Ω–∞ —Ö–∞–±—Ä–µ](https://habr.com/ru/post/325468/#interfeysy).

–ù–µ –±—É–¥—å—Ç–µ –º–Ω–æ–π - —è –ø–æ—Ç—Ä–∞—Ç–∏–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ–≥–¥–∞ –≤–ø–µ—Ä–≤—ã–µ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å —ç—Ç–∏–º, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç üòâ

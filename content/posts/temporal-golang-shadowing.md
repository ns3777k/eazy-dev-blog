+++
title = "–ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ golang"
date = "2021-04-04T21:13:15+03:00"
tags = ["backend", "golang"]
+++

–ö–∞–∑–∞–ª–æ—Å—å –±—ã, –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –≥–æ—Ä–∞ —Å—Ç–∞—Ç–µ–π –∏–∑ —Ä—É–±—Ä–∏–∫–∏ *golang gotchas*, –Ω–æ —ç—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –æ—à–∏–±–∫–∏ —Å–Ω–æ–≤–∞ –∏
—Å–Ω–æ–≤–∞.

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ [Temporal](https://temporal.io/) —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∏ —Å –∫–∞–∫ —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å *–±–∞–≥–æ–º* –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∑–∞—Ç–µ–º–Ω–∏–ª–∏
–æ—à–∏–±–∫—É –≤ —É—Å–ª–æ–≤–∏–∏. –î–∞–∂–µ –Ω–µ –∑–Ω–∞—é, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–∞–Ω–∞–ª—å–Ω–µ–µ üôÇ

*–ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (variable shadowing)* –º–æ–∂–Ω–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ:

```golang
package main

import (
    "fmt"
    "errors"
)

func test() (string, error){
    return "str", errors.New("error")
}

func main() {
    var err error
    
    defer func() {
        fmt.Println(err)
    }()
    
    if true {
        str, err := test()
        fmt.Println(str, err)
    }
}
```

–î–ª—è –Ω–µ—à–∞—Ä—è—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç —Å—é—Ä–ø—Ä–∏–∑–æ–º:

```text
str error
<nil>
```

–ë–∞–≥ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä `:=` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–º —Å–∫–æ—É–ø–æ–º –∏ –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞—Ä—É–∂—É.
IDE –∏ –ª–∏–Ω—Ç–µ—Ä –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –º–æ–≥—É—Ç —É–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–æ—Å—è–∫. –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, —á—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑ Temporal –Ω–µ –∑–Ω–∞–ª–∏ –æ–± —ç—Ç–æ–º =\

[–°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–∞—Ç—å—é](https://docs.temporal.io/blog/go-shadowing-bad-choices/)